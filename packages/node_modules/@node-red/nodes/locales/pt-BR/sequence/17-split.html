<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="split">
    <p> Divide uma mensagem em uma sequência de mensagens. </p>

    <h3> Entradas </h3>
    <dl class = "message-properties">
        <dt> carga útil <span class = "property-type"> objeto | string | array | buffer </span> </dt>
        <dd> O comportamento do nó é determinado pelo tipo de <code> msg.payload </code>:
            <ul>
                <li> <b> string </b> / <b> buffer </b> - a mensagem é dividida usando o caractere especificado (padrão: <code> \ n </code>), sequência de buffer ou em comprimentos fixos. </li>
                <li> <b> matriz </b> - a mensagem é dividida em elementos de matriz individuais ou matrizes de comprimento fixo. </li>
                <li> <b> objeto </b> - uma mensagem é enviada para cada par chave / valor do objeto. </li>
            </ul>
        </dd>
    </dl>
    <h3> Saídas </h3>
    <dl class = "message-properties">
        <dt> partes <span class = "property-type"> objeto </span> </dt>
        <dd> Esta propriedade contém informações sobre como a mensagem foi dividida
        a mensagem original. Se passado para o nó <b> join </b>, a sequência pode ser
        remontado em uma única mensagem. A propriedade possui as seguintes propriedades:
        <ul>
            <li> <code> id </code> - um identificador para o grupo de mensagens </li>
            <li> <code> index </code> - a posição dentro do grupo </li>
            <li> <code> contagem </code> - se conhecido, o número total de mensagens no grupo. Consulte 'modo de streaming' abaixo. </li>
            <li> <code> type </code> - o tipo de mensagem - string / array / objeto / buffer </li>
            <li> <code> ch </code> - para uma string ou buffer, os dados usados ​​para dividir a mensagem como string ou uma matriz de bytes </li>
            <li> <code> chave </code> - para um objeto, a chave da propriedade a partir da qual esta mensagem foi criada. O nó pode ser configurado para também copiar este valor para outras propriedades de mensagem, como <code> msg.topic </code>. </li>
            <li> <code> len </code> - o comprimento de cada mensagem quando dividida usando um valor de comprimento fixo </li>
        </ul>
        </dd>
    </dl>
    <h3> Detalhes </h3>
    <p> Este nó facilita a criação de um fluxo que executa ações comuns em
    uma sequência de mensagens antes, usando o nó <b> join </b>, recombinando o
    seqüência em uma única mensagem. </p>
    <p> Ele usa a propriedade <code> msg.parts </code> para rastrear as partes individuais
    de uma sequência. </p>
    <h4> Modo de streaming </h4>
    <p> O nó também pode ser usado para refluir um fluxo de mensagens. Por exemplo, um
    dispositivo serial que envia comandos terminados em nova linha pode entregar uma única mensagem
    com um comando parcial em seu final. No 'modo de streaming', este nó irá se dividir
    uma mensagem e envie cada segmento completo. Se houver um segmento parcial no final,
    o nó irá retê-lo e acrescentá-lo à próxima mensagem que for recebida.
    </p>
    <p> Ao operar neste modo, o nó não configurará o <code> msg.parts.count </code>
    propriedade, pois não sabe quantas mensagens esperar no fluxo. este
    significa que não pode ser usado com o nó <b> join </b> em seu modo automático </p>
</script>

<script type="text/html" data-help-name="join">
    <p> Une sequências de mensagens em uma única mensagem. </p>
    <p> Existem três modos disponíveis: </p>
    <dl>
        <dt> automático </dt>
        <dd> Quando emparelhado com o nó <b> divisão </b>, ele irá automaticamente juntar as mensagens para reverter a divisão que foi realizada. </dd>
        <dt> manual </dt>
        <dd> Junte sequências de mensagens de várias maneiras. </dd>
        <dt> reduzir a sequência </dt>
        <dd> Aplique uma expressão a todas as mensagens em uma sequência para reduzi-la a uma única mensagem. </dd>
    </dl>
    <h3> Entradas </h3>
    <dl class = "message-properties">
        <dt class = "optional"> partes <span class = "property-type"> objeto </span> </dt>
        <dd> Para ingressar automaticamente em uma sequência de mensagens, todas elas devem ter
        este conjunto de propriedades. O nó <b> dividido </b> gera esta propriedade, mas
        pode ser criado manualmente. Possui as seguintes propriedades:
        <ul>
            <li> <code> id </code> - um identificador para o grupo de mensagens </li>
            <li> <code> index </code> - a posição dentro do grupo </li>
            <li> <code> contagem </code> - o número total de mensagens no grupo </li>
            <li> <code> type </code> - o tipo de mensagem - string / array / objeto / buffer </li>
            <li> <code> ch </code> - para uma string ou buffer, os dados usados ​​para dividir a mensagem como string ou uma matriz de bytes </li>
            <li> <code> chave </code> - para um objeto, a chave da propriedade a partir da qual esta mensagem foi criada </li>
            <li> <code> len </code> - o comprimento de cada mensagem quando dividida usando um valor de comprimento fixo </li>
        </ul>
        </dd>
        <dt class = "optional"> completo </dt>
        <dd> Se definido, o nó acrescentará a carga útil e, em seguida, enviará a mensagem de saída em seu estado atual.
            Se você não deseja anexar a carga útil, exclua-a da mensagem. </dd>
    </dl>
    <h3> Detalhes </h3>

    <h4> Modo automático </h4>
    <p> O modo automático usa a propriedade <code> parts </code> de mensagens recebidas para
       determinar como a sequência deve ser unida. Isso permite que ele automaticamente
       reverter a ação de um nó <b> dividido </b>.

    <h4> Modo manual </h4>
    <p> Quando configurado para ingressar no modo manual, o nó é capaz de unir sequências
     de mensagens em vários resultados diferentes: </p>
    <ul>
        <li> uma <b> string </b> ou <b> buffer </b> - criada juntando a propriedade selecionada de cada mensagem com os caracteres de junção ou buffer especificados. </li>
        <li> uma <b> matriz </b> - criada adicionando cada propriedade selecionada, ou mensagem inteira, à matriz de saída. </li>
        <li> um <b> objeto de chave / valor </b> - criado usando uma propriedade de cada mensagem para determinar a chave sob a qual
        o valor necessário é armazenado. </li>
        <li> um <b> objeto mesclado </b> - criado mesclando a propriedade de cada mensagem em um único objeto. </li>
    </ul>
    <p> As outras propriedades da mensagem de saída são obtidas da última mensagem recebida antes de o resultado ser enviado. </p>
    <p> Uma <i> contagem </i> pode ser definida para quantas mensagens devem ser recebidas antes de gerar a mensagem de saída.
    Para saídas de objetos, uma vez que essa contagem tenha sido atingida, o nó pode ser configurado para enviar uma mensagem para cada mensagem subsequente
    recebido. </p>
    <p> Um <i> tempo limite </i> pode ser definido para acionar o envio da nova mensagem usando o que foi recebido até agora. </p>
    <p> Se uma mensagem for recebida com a propriedade <code> msg.complete </code> definida, a mensagem de saída será finalizada e enviada.
    Isso redefine qualquer contagem de peças. </p>
    <p> Se uma mensagem for recebida com a propriedade <code> msg.reset </code> definida, a mensagem parcialmente completa será excluída e não enviada.
    Isso redefine qualquer contagem de peças. </p>

    <h4> Modo Reduzir Sequência </h4>
    <p> Quando configurado para unir no modo de redução, uma expressão é aplicada a cada
       mensagem em uma sequência e o resultado acumulado para produzir uma única mensagem. </p>

    <dl class = "message-properties">
    <dt> Valor inicial </dt>
    <dd> O valor inicial do valor acumulado (<code> $ A </code>). </dd>
    <dt> Reduzir a expressão </dt>
    <dd> Uma expressão JSONata que é chamada para cada mensagem na sequência.
        O resultado é passado para a próxima chamada da expressão como o valor acumulado.
        Na expressão, as seguintes variáveis ​​especiais podem ser usadas:
        <ul>
            <li> <code> $ A </code>: o valor acumulado, </li>
            <li> <code> $ I </code>: índice da mensagem na sequência, </li>
            <li> <code> $ N </code>: número de mensagens na sequência. </li>
        </ul>
    </dd>
    <dt> Expressão de correção </dt>
    <dd> Uma expressão JSONata opcional que é aplicada após a expressão de redução
        foi aplicado a todas as mensagens na sequência.
        Na expressão, as seguintes variáveis ​​especiais podem ser usadas:
        <ul>
            <li> <code> $ A </code>: o valor acumulado, </li>
            <li> <code> $ N </code>: número de mensagens na sequência. </li>
</script>
